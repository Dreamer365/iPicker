/*!
 * iPicker v2.0.0
 * Copyright (C) 2020, ZG
 * Released under the MIT license.
 */
!function(m,r){"object"===typeof exports&&"undefined"!==typeof module?module.exports=r():"function"===typeof define&&define.amd?define(r):(m=m||self,m.iPicker=r())}("undefined"!==typeof window?window:this,function(m){var r=window.document;m=r.head;var c={type:function(b){return{}.toString.call(b).replace(/(\[object |\])/g,"").toLowerCase()},isObj:function(b){return!("object"!==c.type(b)||!Object.keys(b).length)},isNum:function(b){return"number"===c.type(b)},isFunc:function(b){return"function"===c.type(b)},random:function(){return Math.random().toString(36).substr(2,10)},merge:function(b,a){var c={},n;for(n in a){var e=b[n];c[n]=0===e?e:e||a[n]}return c},getElem:function(b){return"string"===typeof b?g(b):b.length?b:[b]},classFn:function(b,a,f){if("contains"===f)return b.classList[f](a);c.getElem(b).forEach(function(b){a.split(" ").forEach(function(a){b.classList[f](a)})})},toggleClass:function(b,a){c.classFn(b,a,"toggle")},addClass:function(b,a){c.classFn(b,a,"add")},removeClass:function(b,a){c.classFn(b,a,"remove")},hasClass:function(b,a){return c.classFn(b,a,"contains")},setCSS:function(b,a){c.getElem(b).forEach(function(b){for(var c in a)b.style[c]=a[c]})},getCSS:function(b,a){return r.defaultView.getComputedStyle(b,null).getPropertyValue(a)}},l=function(b,a){return(a||r).querySelector(b)},g=function(b,a){return[].slice.call((a||r).querySelectorAll(b))},w=l("#iPicker-style");w&&m.removeChild(w);m.insertAdjacentHTML("beforebegin",'\x3cstyle id\x3d"iPicker-style"\x3e.iPicker-container,.iPicker-container *{box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent}.iPicker-container *{margin:0;padding:0}.iPicker-container{position:relative;float:left;width:200px;height:34px;font-size:14px;cursor:pointer}.iPicker-container:not(:last-child){margin-right:10px}.iPicker-result{overflow:hidden;height:34px;border:#dfdfdf solid 1px;border-radius:4px;background:#fff;color:#000;white-space:nowrap;transition:border-color .2s}.iPicker-result input{pointer-events:none;width:100%;cursor:pointer;display:block;height:32px;background-color:#fff;border:none;outline:0;padding:0 30px 0 12px}.iPicker-result-active:not(.iPicker-disabled),.iPicker-result:not(.iPicker-disabled):hover{border:#00b8ff solid 1px}.iPicker-result i{position:absolute;top:0;right:0;display:block;width:30px;height:34px}.iPicker-result i::before{position:absolute;top:0;right:2px;display:block;width:28px;height:100%;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc2OTk1MjQ3Njc4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI2NTAiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUzNS40NjY2NjcgODEyLjhsNDUwLjEzMzMzMy01NjMuMmMxNC45MzMzMzMtMTkuMiAyLjEzMzMzMy00OS4wNjY2NjctMjMuNDY2NjY3LTQ5LjA2NjY2N0g2MS44NjY2NjdjLTI1LjYgMC0zOC40IDI5Ljg2NjY2Ny0yMy40NjY2NjcgNDkuMDY2NjY3bDQ1MC4xMzMzMzMgNTYzLjJjMTIuOCAxNC45MzMzMzMgMzQuMTMzMzMzIDE0LjkzMzMzMyA0Ni45MzMzMzQgMHoiIHAtaWQ9IjI2NTEiIGZpbGw9IiMwMDAwMDAiPjwvcGF0aD48L3N2Zz4\x3d) center no-repeat;content:"";opacity:.5;transition:transform .3s;transform:scale(.55)}.iPicker-result-active i::before{transform:scale(.55) rotate(180deg)}.iPicker-disabled{cursor:not-allowed;background:#e7e7e7;color:#898989}.iPicker-disabled input{background:#e7e7e7;color:#898989}.iPicker-result.iPicker-disabled i{opacity:.5}.iPicker-list{position:relative;z-index:10;display:none;overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain;padding:8px 0;background:#fff;box-shadow:rgba(0,0,0,.1) 0 2px 6px;transform-origin:center top;animation-timing-function:ease-in-out;animation-duration:.3s;animation-fill-mode:forwards}.iPicker-container:not(.iPicker-cascader) .iPicker-list{max-height:300px}.iPicker-cascader .iPicker-list{overflow-y:hidden;padding:0}.iPicker-list li,.iPicker-list ul{width:100%;display:block;margin:0;padding:0}.iPicker-list ul{float:left}.iPicker-cascader ul{width:200px;overflow-y:auto;overscroll-behavior:contain;padding:8px 0}.iPicker-cascader ul:not(:last-child){border-right:#e6e6e6 solid 1px}.iPicker-list li{position:relative;display:block;padding:6px 12px;list-style:none;transition:.15s;overflow:hidden;clear:both;word-break:break-all}.iPicker-list li *{pointer-events:none}.iPicker-list li span{display:block;float:left}.iPicker-list li i{display:block;position:absolute;top:50%;right:10px;width:8px;height:8px;margin-top:-4px;border-top:#666 solid 1px;border-right:#bbb solid 1px;transform:scale(.8) rotate(45deg)}.iPicker-list li.iPicker-list-active,.iPicker-list li:hover{background:#f5f5f5;color:#00b8ff}.iPicker-list-active{cursor:default}.iPicker-list.iPicker-list-hide,.iPicker-list.iPicker-list-show{display:block}.iPicker-list.iPicker-list-show{animation-name:iPickerShow}.iPicker-list.iPicker-list-hide{animation-name:iPickerHide}@keyframes iPickerShow{from{opacity:0;transform:scaleY(0)}to{opacity:1;transform:scaleY(1)}}@keyframes iPickerHide{from{opacity:1;transform:scaleY(1)}to{opacity:0;transform:scaleY(0)}}\x3c/style\x3e');var B={theme:"select",data:{},level:2,width:200,maxHeight:300,disabled:!1,selected:[],placeholder:["\u7701","\u5e02","\u533a"],onSelect:function(){}},p={},k=function(b,a){function f(b){c.getElem(b).forEach(function(b){b.classList.contains("iPicker-list-show")&&(b.classList.add("iPicker-list-hide"),b.classList.remove("iPicker-list-show"),b.previousElementSibling.classList.remove("iPicker-result-active"))})}var n="picker_"+c.random(),e=g(b);if(b&&a&&e.length&&c.isObj(a)&&c.isObj(a.data)){var d=c.merge(a||{},B),k="select"===d.theme,u="cascader"===d.theme,A=c.isFunc(d.onSelect),m="";if(c.isNum(d.level)&&0<=d.level&&3>d.level){if(k)for(a=0;a<parseInt(d.level)+1;a++)m+='\r\n\x3cdiv class\x3d"iPicker-container"\x3e\r\n\x3cdiv class\x3d"iPicker-result"\x3e\r\n\x3cinput type\x3d"text" readonly autocomplete\x3d"off" spellcheck\x3d"false"\x3e\r\n\x3ci\x3e\x3c/i\x3e\r\n\x3c/div\x3e\r\n\x3cdiv class\x3d"iPicker-list"\x3e\r\n\x3cul\x3e\x3c/ul\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n';u&&(m='\r\n\x3cdiv class\x3d"iPicker-container"\x3e\r\n\x3cdiv class\x3d"iPicker-result"\x3e\r\n\x3cinput type\x3d"text" readonly autocomplete\x3d"off" spellcheck\x3d"false"\x3e\r\n\x3ci\x3e\x3c/i\x3e\r\n\x3c/div\x3e\r\n\x3cdiv class\x3d"iPicker-list"\x3e\r\n\x3cul\x3e\x3c/ul\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n');var x=!0;e.forEach(function(a){function n(b){var a=d.data,c="";if(a&&(a="string"===typeof a?JSON.parse(a):a,a[b]))for(var f in a[b])c+='\x3cli data-code\x3d"'+f+'" data-name\x3d"'+a[b][f]+'"\x3e\x3cspan\x3e'+a[b][f]+"\x3c/span\x3e"+("cascader"===d.theme?"\x3ci\x3e\x3c/i\x3e":"")+"\x3c/li\x3e";return c}a.innerHTML=m;a.iPickerOptions=d;a.cacheTarget=b;var e=g(".iPicker-container",a),p=g(".iPicker-result",a),z=g("input",a),h=g(".iPicker-list",a);e.forEach(function(a,b){a.dataset.index=b});u&&c.addClass(e,"iPicker-cascader");var t=0;c.isNum(d.maxHeight)&&(t=(46<=d.maxHeight?parseInt(d.maxHeight):46)+"px",k&&c.setCSS(h,{maxHeight:t}));c.isNum(d.width)&&c.setCSS(e,{width:(90<=d.width?parseInt(d.width):90)+"px"});if(d.disabled){var q=[];!0===d.disabled?q=[0,1,2]:Array.isArray(d.disabled)&&d.disabled.length&&(q=d.disabled);q.forEach(function(a){0<=a&&2>=a&&p.forEach(function(b,d){d===a&&c.addClass(b,"iPicker-disabled")})})}k&&Array.isArray(d.placeholder)&&d.placeholder.length&&d.placeholder.forEach(function(a,b){z[b]&&z[b].setAttribute("placeholder",d.placeholder[b])});u&&("string"!==typeof d.placeholder&&(d.placeholder="\u8bf7\u9009\u62e9\u5730\u533a"),z[0].setAttribute("placeholder",d.placeholder));h.forEach(function(a){a.dataset.id=c.random()});p.forEach(function(a){a.addEventListener("click",function(){var b=a.nextElementSibling;f('.iPicker-list:not([data-id\x3d"'+b.dataset.id+'"])');c.hasClass(a,"iPicker-disabled")||(c.toggleClass(a,"iPicker-result-active"),c.hasClass(b,"iPicker-list-show")?f(b):(c.addClass(b,"iPicker-list-show"),c.removeClass(b,"iPicker-list-hide")))})});if(u){var q=l("ul",h[0]),w=c.getCSS(q,"width");t&&c.setCSS(q,{maxHeight:t});c.setCSS(h[0],{width:w});var v,y;a.onclick=null;h[0].addEventListener("click",function(a){a=a.target;if("li"===a.nodeName.toLowerCase()){var b=a.parentNode,e=a.dataset.code;b.nextElementSibling&&!function E(){var a=b.nextElementSibling;a&&(h[0].removeChild(a),b.nextElementSibling&&E())}();g("ul",h[0]).length<d.level+1?(h[0].insertAdjacentHTML("beforeend","\x3cul\x3e"+n(e)+"\x3c/ul\x3e"),e=g("ul",h[0]),c.setCSS(h[0],{width:e.length*parseInt(w)+"px"}),t&&c.setCSS(e,{minHeight:t,maxHeight:t}),g("ul",h[0]).length===d.level+1&&g("i",l("ul:last-child",h[0])).forEach(function(a){a.parentNode.removeChild(a)})):f(h);c.removeClass(g("li",b),"iPicker-list-active");c.addClass(a,"iPicker-list-active");v=[];y=[];g(".iPicker-list-active",h[0]).forEach(function(a){var b=l("span",a).innerText;a=a.dataset.code;v.push(b);y.push(a);z[0].value=v.join(" / ")});var k=[];y.forEach(function(a,b){k.push({code:a,name:v[b]})});p[0].selected={code:y,name:v,all:k};A&&x&&d.onSelect.call(a,y,v,k)}})}k&&(a.onclick=function(a){var b=a.target;if("li"===b.nodeName.toLowerCase()){a=b.parentNode.parentNode;var h=a.parentNode;c.removeClass(g("li",b.parentNode),"iPicker-list-active");c.addClass(b,"iPicker-list-active");var k=a.previousElementSibling;k.selected={code:b.dataset.code,name:b.innerText};l("input",k).value=b.innerText;f(a);e.forEach(function(a,b){b>h.dataset.index&&(l(".iPicker-result",a).selected=void 0,l("input",a).value="",l("ul",a).innerHTML="")});var m=h.nextElementSibling;if(m)var r=window.setTimeout(function(){window.clearTimeout(r);l("ul",m).innerHTML=n(b.dataset.code)},0);if(A&&x){var q=[],u=[];p.forEach(function(a){var b=a.selected||{};a=b.code;b=b.name;a&&q.push(a);b&&u.push(b)});var t=[];q.forEach(function(a,b){t.push({code:a,name:u[b]})});d.onSelect.call(b,q,u,t)}}});l("ul",h[0]).innerHTML=n("86");u&&0===d.level&&g("i",h[0]).forEach(function(a){a.parentNode.removeChild(a)});if(Array.isArray(d.selected)&&d.selected.length){var q=function(){(function D(b){window.clearTimeout(C);x=!1;if(b!==d.selected.length){var c="[data-"+(d.selected[b].match(/\d/)?"code":"name")+'\x3d"'+d.selected[b]+'"]';l(c,a).click();b++;x=!0;window.setTimeout(D,0,b)}else x=!0})(0)},C=null;q();a.cacheTrigger=q}r.addEventListener("click",function(a){e.forEach(function(b,c){a.target===b||b.contains(a.target)||f(h[c])})})});p[n]=e;return n}}};k.get=function(b,a){function c(a){var b=[],c=n[0],f=g(".iPicker-result",c);l(".iPicker-cascader",c)?b=(f[0].selected||{})["all"!==a?a:"all"]:f.forEach(function(c){c=c.selected||{};"all"!==a?b.push(c[a]):b.push({code:c.code,name:c.name})});return(b||[]).filter(function(a){return"object"===typeof a?a.code&&a.name&&a:a})}var n=p[b];if(b&&n){if(!a||"code"===a)return c("code");if("name"===a)return c("name");if("all"===a)return c("all")}};k.clear=function(b){var a=p[b];b&&a&&a.forEach(function(a){g(".iPicker-result",a).forEach(function(a){a.selected=void 0});g("input",a).forEach(function(a){a.value=""});g(".iPicker-list-active",a).forEach(function(a){c.removeClass(a,"iPicker-list-active")});g(".iPicker-container",a).forEach(function(a,b){b&&(l("ul",a).innerHTML="")});l(".iPicker-cascader",a)&&(g("ul",a).forEach(function(a,b){b&&a.parentNode.removeChild(a)}),c.setCSS(l(".iPicker-list",a),{width:c.getCSS(l("ul",a),"width")}))})};k.reset=function(b){var a=p[b];b&&a&&a.forEach(function(a){a.cacheTrigger?a.cacheTrigger():k.clear(b)})};k.destroy=function(b){var a=p[b];b&&a&&(a.forEach(function(a){a.innerHTML="";delete a.iPickerOptions;delete a.cacheTarget;delete a.cacheTrigger}),delete p[b])};k.enabled=function(b,a){var f=p[b];b&&f&&f.forEach(function(b){var e=g(".iPicker-disabled",b);e.length&&(!a||l(".iPicker-cascader",b)?c.removeClass(e,"iPicker-disabled"):Array.isArray(a)&&a.length&&a.forEach(function(a){0<=a&&2>=a&&c.removeClass(e[a],"iPicker-disabled")}))})};k.disabled=function(b,a){var f=p[b];b&&f&&f.forEach(function(b){var e=g(".iPicker-result",b);e.length&&(!a||l(".iPicker-cascader",b)?c.addClass(e,"iPicker-disabled"):Array.isArray(a)&&a.length&&a.forEach(function(a){0<=a&&2>=a&&c.addClass(e[a],"iPicker-disabled")}))})};return k});